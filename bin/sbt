#!/bin/sh

BASE=`dirname $0`
REQUIRED="$REQUIRED java"

. $BASE/common/java
. $BASE/common/jrebel

SBT_LAUNCHER=$BASE/symlinks/sbt

SPRING_INSTRUMENT=$BASE/symlinks/spring-instrument

JAVA_OPTS="-XX:MaxPermSize=256m -Xmx256M"

if [ -f "$JREBEL_LIB" ]; then
  JAVA_OPTS="$JAVA_OPTS -noverify -javaagent:$JREBEL_LIB"
fi

if [ -f "$SPRING_INSTRUMENT" ]; then
  JAVA_OPTS="$JAVA_OPTS -javaagent:$SPRING_INSTRUMENT"
fi

$JAVA_CMD $JAVA_OPTS -jar $SBT_LAUNCHER "$@"
