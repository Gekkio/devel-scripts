#!/bin/sh

JREBEL=`dirname $0`/symlinks/jrebel/jrebel.jar
SBT_LAUNCHER=`dirname $0`/symlinks/sbt

SPRING_INSTRUMENT=`dirname $0`/symlinks/spring-instrument

JAVA_OPTS="-XX:MaxPermSize=256m -Xmx256M"

if [ `uname -m` = "x86_64" ]; then
  JAVA_OPTS="$JAVA_OPTS -XX:+UseCompressedOops"
fi

if [ -f "$JREBEL" ]; then
  JAVA_OPTS="$JAVA_OPTS -noverify -javaagent:$JREBEL"
fi

if [ -f "$SPRING_INSTRUMENT" ]; then
  JAVA_OPTS="$JAVA_OPTS -javaagent:$SPRING_INSTRUMENT"
fi

java $JAVA_OPTS -jar $SBT_LAUNCHER "$@"
